<!DOCTYPE html>
<html lang="en-us">
<!--
    Copyright (C) 2024 Jeremy Taylor
    k1jst at riares dot org

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->

<head>
  <script id="variables">
    // Use these variables to set default values if you are using the file offline or hosting it yourself.
    let defaultInputCallsign = "K1JST";
    let defaultInputName = "Jeremy";
    let defaultInputLocation = "Coventry, RI";
    const ALLOW_COOKIE_PROMPT = "true"; // false: no cookie permission popup, cookies not allowed 
    const ALLOW_COOKIES_OVER_HTTP = "true"; // false: no cookie popup unless the page is being served over https
    const EXERCISE_CHOICES = {
      'Comments': '<h4>Comments from Each Station</h4><p class="tx">This is W1RIA, Net control for this evening‚Äôs RI ARES Net, we will now take comments from each station</p><p class="net">Call each station and request comments. You cam also request comments on a certain topic, or pose a question for each station to answer. Start with Mobile or Portable stations. Skip any In and Out stations. Alternatively, you can request anyone with comments call in, as you did with announcements.</p><p class="tx">(Call Sign) Any comments for the net, OVER?</p><p class="net">(If nothing heard)</p><p class="tx"> Nothing Heard, OUT.</p>',
      'Weather': '<h4>Weather Exercise</h4><p class="tx">This is W1RIA, Net control for this evening‚Äôs RI ARES Net. This evening‚Äôs exercise will be to collect weather information from each station. It is ok if you do not have any information to report, just respond with "No Traffic for the Net". If you have any of this information available, please report the current temperature, humidity, barometric pressure, wind speed, wind direction, highest recent wind gusts, precipitation totals, or any other pertinent weather information.</p><p class="net">Call each station and request comments. Start with Mobile or Portable stations. Skip any In and Out stations. Alternatively, you can request anyone with traffic call in, as you did with announcements</p><p class="tx">(Call Sign) please come with your weather information for the net, OVER.</p><p class="net">(If nothing heard)</p><p class="tx"> Nothing Heard, OUT.</p>',
      'Airport_Weather': '<h4>Airport Weather Exercise</h4><p class="tx">This is W1RIA, Net control for this evening‚Äôs RI ARES Net. This evening‚Äôs exercise will be to report local airport weather information gathered broadcasts in the VHF-AM Aviation Band. Details of the frequencies and airport locations of these broadcasts can be found at the ri ares dot org website under the documents tab. Traffic contents include airport name, ZULU time of report, and if available the wind, visibility, sky condition, temperature, dew point, and altimeter. It is ok if you do not have any information to report, just respond with "No Traffic for the Net". This is W1RIA, Net control for the RI ARES VHF Net, we will now take traffic from each station for this exercise.</p><p class="net">Call each station and request comments. Start with Mobile or Portable stations. Skip any In and Out stations. Alternatively, you can request anyone with traffic call in, as you did with announcements</p><p class="tx">(Call Sign) please come with your traffic for the net, OVER.</p><p class="net">(If nothing heard)</p><p class="tx"> Nothing Heard, OUT.</p>',
      'Repeater': '<h4>Repeater Exercise</h4><p class="tx">This is W1RIA, Net control for this evening‚Äôs RI ARES Net. This evening‚Äôs exercise will be to report which repeater you are using to check into the net and your current power level. You may also provide any comments you may have for the net. This is W1RIA, Net control for the RI ARES VHF Net, we will now take traffic from each station for this exercise.</p><p class="net">Call each station and request comments. Start with Mobile or Portable stations. Skip any In and Out stations.</p><p class="tx">(Call Sign) please come with your traffic for the net, OVER.</p><p class="net">(If nothing heard)</p><p class="tx"> Nothing Heard, OUT.</p>'
    }
  </script>
  <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RI ARES VHF Repeater Script</title>
  <style>
    * {
    box-sizing: inherit;
}

html {
    height: 100%;
    box-sizing: border-box;
}

body {
    font-family: Verdana, sans-serif;
}

p,
div,
span {
    opacity: 1;
    scale: 1;
}

p {
    line-height: 1.5rem;
}

h4 {
    color: blue;
}

label {
    font-weight: bolder;
}

button {
    transition: all .5s;
    background-color: #444;
    color: white;
    padding: .25em .5em;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    border-radius: 3px;
    margin: .2em;
    border: none;
}

.help-pop {
    width: 90dvw;
    background-color: #88aaff;
    padding: 1em;
}

.help-pop--symbol {
    position: absolute;
    top: 0;
    right: 0;
    background-color: white;
    display: inline-block;
    padding: .5em;
}

.time-box {
    position: fixed;
    top: 0;
    left: 0;
    width: auto;
    height: auto;
    text-align: center;
    font-family: 'Courier New', monospace;
    font-weight: bold;
    font-size: 1.25em;
    background-color: #444;
    opacity: 1;
    color: white;
    padding: .5em;
    margin: .2em;
    box-shadow: 0 1em 2em rgba(0, 0, 0, 0.3);
    z-index: 20;
}

.time-box--digital-clock {
    color: white;
}

.time-box--time-stamp {
    color: white;
    font-size: 1rem !important;
}

.time-box--time-stamp--button {
    background-color: rgba(0, 0, 0, 0.3)
}

.cookie-consent {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 30vw;
    min-width: 20em;
    height: auto;
    background-color: #fff;
    opacity: 1;
    padding: 2em;
    border-radius: 15px;
    box-shadow: 0 1em 2em rgba(0, 0, 0, 0.3);
    text-align: center;
    z-index: 10;
}

.cookie-consent.hide {
    opacity: 0;
    pointer-events: none;
    transform: scale(0.8);
    transition: all 0.3s ease;
}

.cookie-consent-box {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    width: 100%;
}

.cookie-consent-box::selection {
    color: #fff;
    background: #229a0f;
}

.cookie-consent--content img {
    max-width: 90px;
}

.cookie-consent--content p {
    color: #444;
    margin: 1em 0 2em 0;
}

.cookie-consent--content-header {
    font-size: 1.5em;
    font-weight: 600;
    padding-top: 1em;
}

.cookie-consent--input {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 1em;
}

.cookie-consent--input-button {
    padding: 1vw 2vh;
    border: none;
    outline: none;
    color: #fff;
    font-size: 1.25rem;
    font-weight: 500;
    border-radius: 1vw;
    cursor: pointer;
    transition: all 0.3s ease;
}

.cookie-consent--input-button-agree {
    background: #2a910b;
    margin-right: 1em;
}

.cookie-consent--input-button-decline {
    color: #111211;
    background: transparent;
    border: 2px solid #111211;
    text-decoration: none;
}

.checkin-input {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    color: white;
    background-color: black;
    border-top: 3px solid darkgray;
    padding: .5em;
    padding-left: 1em;
    z-index: 100;
}

.checkin-input--display {
    font-size: 16px;
}

.checkin-input--display pre {
    max-height: 20vh;
    overflow: auto;
}

.checkin-input--display .checkinline {
    color: white;
    font-size: 1.2em;
}

.checkin-input--text-input {
    width: 80dvw;
}

.page {
    position: relative;
    height: 100dvh;
    width: 100%;
    align-items: center;
}

.header-title {
    font-size: 3wh;
    font-weight: 600;
    width: 100%;
    display: flex;
    justify-content: center;
}

.header-input {
    display: flex;
    align-items: center;
    justify-content: center;
}

.header-input--info {
    float: left;
    width: auto;
    margin: 0 2vw;
    margin-top: 1.75em;
}

.header-input--info label {
    font-size: .8em;
}

.header-input--info input {
    margin: .2em;
}

.header-input--info button {
    padding: .15em;
}

.content-net {
    z-index: 1;
    padding-left: 1rem;
    padding-right: 2.5rem;
    padding-bottom: 30vh;
}

.content-net span {
    color: black;
}

.net--netlogger {
    font-style: oblique;
}

.instructions p {
    margin-left: 2em;
}

p.tx::before {
    color: black;
    font-size: 1.25em;
    content: "üéôÔ∏è";
}

p.tx {
    color: darkred;
    font-weight: bold;
    display: inline-block;
    background: transparent;
}

p.tx[data-selected=true] {
    background-color: #ff9;
    box-shadow: .3em .3em .3em .2em #888;
}

p.net[data-selected=true] {
    background-color: #ff9;
    box-shadow: .3em .3em .3em .2em #888;
}
div.net:has(~ div.net p.tx[data-selected=true]) p {
    text-decoration: line-through;
    background-color: #eeeeee;
    box-shadow: .3em .3em .3em .2em #888;
}
p:has(~ p.tx[data-selected=true]) {
    text-decoration: line-through;
    background-color: #eeeeee;
    box-shadow: .3em .3em .3em .2em #888;
}

p.tx::after {
    color: black;
    font-size: 1.25em;
    content: "üéß";
}

div.instructions {
    color: darkgreen;
}

.menu {
    position: fixed;
    top: 0;
    right: 0;
    z-index: 9;
}

.menu--header-button  {
    float: right;
    margin: 0, .2em;
    width: auto;
    background-color: #444 !important;
    color: white !important;
}

.menu-display {
    background-color: #666;
    margin-right: .2em;
    margin-top: .5em;
    padding: .5em;
    box-shadow: 0 1em 2em rgba(0, 0, 0, 0.3);
}

.menu-display--button {
    width: 100%;
    text-align: left;
}

#clipboardTextArea {
    position: absolute;
    left: -100%;
}

/**
 * Blinking text
 *
*/
.blink {
    animation: blinker 1s linear infinite;
}
  
@keyframes blinker {
    50% {
      opacity: 0;
    }
}

@media print {
    .checkin-input,
    .menu,
    .help-pop,
    .cookie-consent,
    .page-header,
    .time-box,
    .sidebar {
        display: none !important;
    }

    p {
        line-height: 1.5;
    }

    div#right div {
        break-inside: avoid;
    }
}

.button--state-active {
    background-color: green !important;
}

.clear-padding {
    padding: 0 !important;
}

.hidden {
    display: none;
    opacity: 0;
    scale: 0;
}

  </style>
</head>

<body>
<!-- Fixed containers that live above the page -->
  <div popover id="help-popup" class="help-pop">
    <div id="help-popup-symbol" class="help-pop--symbol">‚ùî</div>
    <p>Thanks for checking out our customizable net script.</p>
    <ul>
      <li>Use the menu ‚ò∞ to toggle visibility of customizable elements and inputs and print your customized net script.</li>
      <li>Enter your customization in the input boxes and press replace ‚ü≥. If you have cookies enabled and the page is
        not being used locally these values will be stored as cookies.</li>
      <li>The Date fields automatically populate. The Next Net date is set for 2 weeks out. If this is inaccurate use
        the date picker to select the correct value.</li>
      <li>Use Start ‚úÖ and End ‚úÖ to mark the start and end of the net. This will be used in the Net Report, and the end
        time will also populate in the net closing portion of the script.</li>
      <li>Populate checkins at the bottom of the screen by typing in the text box. Press or click Enter ‚èé to submit a
        checkin. If you need to edit a checkin, click on it in the list... the checkin value will be returned to the
        edit window for you to change. Press or click Enter ‚èé to resubmit.</li>
      <li>Use the Clipboard üìã to copy a checkin report to the clipboard that you can paste into an email or google
        form.</li>
      <li>The script is also designed to be used offline. All of the code is embedded in the html file. If you save the
        html file to your computer, you can edit the variables at the top of the file to disable the cookie popup and
        set your defaults.</li>
    </ul>
    <p>If you have any suggestions or comments reach out to K1JST. Feel free to make your own improvements and submit a
      pull request at <a href="https://github.com/k1jst/riares-docs/">https://github.com/k1jst/riares-docs/</a></p>
  </div>
  <div id="time-box" class="time-box">
    <div id="time-box--digital-clock" class="clock"></div>
    <div class="time-box--time-stamp">
      <button class="time-box--time-stamp--button time-stamp--button-start" onclick="recordTimeStamp('start','mark')">Start ‚úÖ</button>
      <button class="time-box--time-stamp--button time-stamp--button-end" onclick="recordTimeStamp('end','mark')">End ‚úÖ</button>
      <div id="time-box--time-stamp-start" class="time-box--time-stamp--box time-box--time-stamp-start hidden">S
        <span id="time-box--time-stamp--value-start" class="time-box--time-stamp--value time-box--time-stamp--value-start">(not marked)</span> <button id="time-box--time-stamp--button-start-clear" class="time-box--time-stamp--button clear-padding"
          onclick="recordTimeStamp('start','clear')">‚ùé</button>
      </div>
      <div class="time-box--time-stamp--box time-box--time-stamp-end hidden">E
        <span id="time-box--time-stamp--value-end" class="time-box--time-stamp--value time-box--time-stamp--value-end">(not marked)</span> <button id="time-box--time-stamp--button-end-clear" class="time-box--time-stamp--button clear-padding"
          onclick="recordTimeStamp('end','clear')">‚ùé</button>
      </div>
    </div>
  </div>
  <div id="customtoggle" class="menu"><button id="customizetoggleButton" class="menu--header-button menu-display--vistoggle-button button--state-active" onclick='setVisibility("div.menu-display", "toggle", "button.menu-display--vistoggle-button")'> ‚ò∞
    </button><button popovertarget="help" id="helpButton" class="menu--header-button menu-help--vistoggle-button">‚ùî</button><br />
    <div id="customizetoggle" class="menu-display">
      <button id="clock-box--vistoggle-button" class="menu-display--button clock-box--vistoggle-button button--state-active"
        onclick='setVisibility("div.time-box", "toggle", "button.clock-box--vistoggle-button")'>üëÅ Clock üïì</button><br />
      <button id="header-input-info--vistoggle-button" class="menu-display--button menu--vis-button-info button--state-active" onclick='setVisibility("div.header-input--info", "toggle", "button.menu--vis-button-info")'>üëÅ All Input</button><br />
      <button id="inputdivButton" class="menu-display--button menu--vis-button-info menu--vis-button-info-user button--state-active" onclick='setVisibility("div.header-input--info-user", "toggle", "button.menu--vis-button-info-user")'>üëÅ Callsign/Name/QTH
        üë§</button><br />
      <button id="inputdatedivButton" class="menu-display--button menu--vis-button-info menu--vis-button-info-date-exercise button--state-active"
        onclick='setVisibility("div.header-input--info-date-exercise", "toggle", "button.menu--vis-button-info-date-exercise")'>üëÅ Date/Exercise üìÖüèãüèª‚Äç‚ôÇÔ∏è</button><br />
      <button id="menu--vis-button-netlogger" class="menu-display--button menu--vis-button net--netlogger-button" onclick='setVisibility("div.net--netlogger", "toggle", "button.net--netlogger-button")'>üëÅ Netlogger üñ•Ô∏è</button><br />
      <button class="menu-display--button menu--utility menu--utility-print" title="Be sure to customize before you print" onclick="window.print()">üõ†Ô∏è Print üñ®Ô∏è</button>
      <button class="menu-display--button menu--utility menu--utility-replace" onclick="setValues()">üõ†Ô∏è Replace ‚ü≥</button>
    </div>
  </div>
  <div id="checkinsdiv" class="checkin-input">
    <label for="checkinbox">Checkins:</label><br />
    <label for="checkinbox" style="font-size: .7em">CALL First Name, Location,Mobile/IO/Notes</label>
    <div id="checkin-area" class="checkin-input--display">
      <pre title="Click on an entry to return it to the edit block. Press or Click Enter to submit a line."
        id="checkinreport">
      </pre>
      <div class="textarea-wrapper">
        <input title="Type text and press Enter key or click enter button to the right" class="checkin-input--text-input" id="checkinbox" type="text" />
        <button title="Enter" id="checkinboxButton" onclick="recordCheckin()"> ‚èé </button>
        <button title="Copy Net Report to Clipboard" id="copyclip" onclick="copyNetReport_Clipboard()"> üìã </button>
        <!--<button title="Increase font size" onclick="alterCheckinAreaFontSize('increase')"> ‚ûï </button> 
        <button title="Decrease font size" onclick="alterCheckinAreaFontSize('decrease')"> ‚ûñ </button>  Needs Work -->
      </div>
    </div>
  </div>
  <div id="consentBox" class="cookie-consent">
    <div id="consentPopup" class="cookie-consent-box">
      <div id="consentContent" class="cookie-consent--content">
        <img src="img/ares_logo.png" /><br />
        <header id="consentHeader" class="cookie-consent--content-header">Cookies: Your Choice</header>
        <p>We can use cookies to save your custom information on your computer so you don't need to enter it all the
          time. If you don't want cookies saved on your computer, the scripts will default to K1JST's information
          every time you load the page, but it's your call.</p>
        <div id="consentButtons" class="cookie-consent--input">
          <button id="consentButton" class="cookie-consent--input-button cookie-consent--input-button-agree" onclick="acceptCookies()">Save My Info</button><button id="rejectButton" class="cookie-consent--input-button cookie-consent--input-button-decline"
            onclick="declineCookies()">No Thanks</button>
        </div>
      </div>
    </div>
  </div>
<!-- The page layer begins here -->
  <div id="page" class="page">
  <header class="page-header">
    <div id="header" class="header-title">RI ARES VHF Repeater Net Script</div>
    


  <div class="header-input">
    <div id="left">
      
      <div class="header-input--info header-input--info-user sidebar">
        <label for="inputCallsign">Callsign:</label>
        <input type="text" id="inputCallsign" class="repvalue" value="" /><br />
        <label for="inputName">First Name:</label>
        <input type="text" id="inputName" class="repvalue" value="" /><br />
        <label for="inputLocation">Location:</label>
        <input type="text" id="inputLocation" class="repvalue" value="" />
        <button onclick="setValues()">‚ü≥</button>
      </div>
      <div class="header-input--info header-input--info-date-exercise sidebar">
        <label for="netdatePicker">Net Date:</label>
        <input type="date" class="repvalue" id="netdatePicker" /><br />
        <label for="nextdatePicker">Next Net Date:</label>
        <input type="date" class="repvalue" id="nextdatePicker" /><br />
        <label for="exercisePicker">Exercise</label>
        <select id="exercisePicker" class="repvalue">
        </select>
        <button onclick="setValues()">‚ü≥</button>
      </div>
    </div>
  </div>
  </header>
  <main class="content-net">
      <h3>RI ARES VHF Repeater Net Script</h3>
      <div class="net instructions" id="pre-net-inst">
        <h4>Pre-Net Instructions</h4>
        <p class="net">Net control operators are in control of the net. If people go too fast, slow the pace down. Use pauses when
          you
          want to slow things down. If people rush through, or step on each other, log whatever call sign you can hear,
          and continue calling for check ins. There is no need to explain at length anything you do, unless it is for
          educational purposes. </p>
        <div class="net net--netlogger hidden"><p class="net">Open NetLogger and create a Net Called RI ARES VHF Repeater Net, and enter
          W1RIA
          as the NCS, and your own call as the Operator, a password will be provided by the net manager, then create the
          net. Place W1RIA on line 1 of the list. You can edit any fields on line 1 as appropriate to your QTH etc.</p></div>
      </div>
      <div class="net" id="pre-net-check">
        <h4>Pre-net</h4>
        <p class="net">(check for any emergency traffic about 1 or 2 minutes prior to calling the net)</p>
        <p class="tx">This is <span class="callsign">(Call Sign)</span> checking for any emergency or priority traffic
          on
          this repeater. There is an upcoming net. If you have emergency traffic please come now, OVER.</p>
        <p class="net">(if nothing heard)</p>
        <p class="tx">Nothing heard, OUT.</p>
      </div>
      <div class="net" id="preamble">
        <h4>Preamble</h4>
        <p class="tx">Calling the Rhode Island ARES VHF Repeater Net. This is the Rhode Island Amateur Radio Emergency
          Service Net for <span class="netdate">DATE_TODAY</span>. This is <span class="callsign phonetic">(Call
            Sign)</span>, my name is <span class="firstname">(First Name)</span>, operating as <b>Whiskey One Romeo
            India
            Alpha</b>. I am located in <span class="qth">(Location)</span> and I will be net control station for this
          evening‚Äôs net.</p>
        <p class="tx">This is a directed net and will always break for any incoming emergency traffic. Any amateur radio
          operator is welcome to check in. RI ARES maintains a website at riares dot org.</p>
        <p class="tx">This RI ARES Repeater net is held every 1st and 3rd Tuesday of the Month, as well as a Skywarn
          Practice and Training net every Wednesday on this repeater network. There is also a VHF Simplex Net held every
          2nd Tuesday of the month, on 147 decimal 42 megahertz, and a Digital net is held every 4th Tuesday of the
          month
          with instructions sent by email. All RI ARES Practice and Training Nets start at 7:30 pm, 1930 local time.</p>
      </div>
      <div class="net--netlogger net hidden" id="netlogger2">
        <p class="tx">Net control for this net uses NetLogger to log all checkins to this net. All stations are welcome
          to
          download the free netlogger software and follow along. OUT.</p>
      </div>
      <div class="net" id="checkins">
        <h4>Checkins</h4>
        <p class="tx">Check-ins will be taken from mobile and portable stations first, then from fixed stations. When
          checking in, please delay speaking for a second to allow the repeater network to activate, then say ‚ÄúThis is‚Äù,
          and un-key your mic</p>
        <p class="net">(un-key to illustrate and wait for beep)</p>
        <p class="tx">to check for doubling. Please check in with your call sign given phonetically, your name, and your
          location.<br />
          Mobile or Portable Stations, (with emphasis) I say again, only MOBILE OR PORTABLE STATIONS wishing to check in
          please call with your callsign, name and location, now, OVER.</p>
        <p class="net">(Log call signs, names, and locations). If a partial callsign is heard or the signal is very noisy, ask the station to change position or boost power and try checking in again.</p>
        <p class="tx">The net recognizes (read aloud the call signs heard) OUT.</p>
        <p class="net">(If nothing heard)</p>
        <p class="tx"> Nothing Heard, OUT.</p>
        <p class="tx">This is W1RIA Net control for this evening‚Äôs RI ARES Net, now FIXED STATIONS please call with your
          callsign, location and name now, OVER.</p>
        <p class="net">(Log call signs, names, and locations)</p>
        <p class="tx">The net recognizes (read aloud the call signs heard) OUT.</p>
        <p class=tx>This is W1RIA Net control, any additional stations for the net please call now, OVER.</p>
        <p class="net">(Log call signs, names, and locations)</p>
        <p class="tx">The net recognizes (read aloud the call signs heard) OUT.</p>
        <p class="net">(If nothing heard)</p>
        <p class="tx"> Nothing Heard, OUT.</p>
      </div>
      <div class="net" id="announcements">
        <h4>Announcements</h4>
        <p class="tx">This is W1RIA, are there any announcements or news from any Emergency Coordinators who are checked
          into the net, OVER?</p>
        <p class="tx">Net recognizes (list Calls signs heard) with announcements for the net. (1st Call Sign) please
          come
          with your announcement, OVER</p>
        <p class="net">(If nothing heard)</p>
        <p class="tx"> Nothing Heard, OUT.</p>
        <p class="tx">(After announcement acknowledge, and if you have questions or comments, make them) (announcer call
          sign) thanks. Roger, OUT.</p>
        <p class="net">Repeat for next call signs with announcements.</p>
      </div>
      <div class="net" id="recheck">
        <h4>Re-check</h4>
        <p class=tx>This is W1RIA net control for this evening's net, any additional stations wishing to checkin to the
          net please come with your callsign, name and location now, OVER.</p>
        <p class="net">(Log call signs, names, and locations)</p>
        <p class="tx">The net recognizes (read aloud the call signs heard) OUT.</p>
        <p class="net">(If nothing heard)</p>
        <p class="tx"> Nothing Heard, OUT.</p>
      </div>
      <div class="net" id="exercise">
        <h4>Exercise</h4>
        <p class="tx">This is W1RIA, Net control for this evening‚Äôs RI ARES Net, we will now take comments from each
          station, (Start with check-in call signs) Any comments for the net? </p>
        <p class="net">After last listed name</p>
        <p class="tx">Are there any additional checkins for the net, OVER?</p>
        <p class="net">Repeat process of logging & exercise.</p>
        <p class="net">(If nothing heard)</p>
        <p class="tx"> Nothing Heard, OUT.</p>
      </div>
      <div id="bottomofroster" class="net">
        <p class="tx">That is the bottom of the roster. This is W1RIA, Net control for this evening's RI ARES Net. Are
          there any additional stations, comments or business for the net before we close the net? This is the last call for checkins, OVER.</p>
        <p class="net">Log call signs, names, and locations. Repeat process of logging & exercise.</p>
        <p class="net">(If nothing heard)</p>
        <p class="tx"> Nothing Heard, OUT.</p>
      </div>
      <div id="closing" class="net">
        <h4>Closing the net</h4>
        <p class="tx">We would like to thank all participants for joining this net, and thanks to all who stood by while
          the net was in session. The next RI ARES Net will be held at 7:30 pm, 1930 hours, on <span
            class="nextdate">(Date of Next Net)</span>. The Rhode Island ARES organization would like to thank the
          owner,
          trustee, and financial supporters of this repeater network for its use and maintenance. We look forward to our
          next net. This net is closed at <span class="endTime">(not marked)</span> and this network is returned to
          normal
          amateur use. This is <span class="callsign">(Call Sign)</span> for W1RIA, goodnight. OUT.
        </p>
      </div>
  </main>
  </div>
  <script>
    
/**
 * Input/Replacement hash table
 * @constant {string|string}
 * @type {input_fields {replaces|from}}
 * @see setValues()
 */
const INPUT_VALUES = [
    { valueClass: "callsign", fieldId: "inputCallsign" },
    { valueClass: "firstname", fieldId: "inputName" },
    { valueClass: "qth", fieldId: "inputLocation" }
];
/**
 * Date/Replacement hash table
 * @constant {string|string}
 * @type {input_fields {replaces|from}}
 * @see setDateValues()
 */
const INPUT_DATE_FIELDS = [
    { valueClass: "netdate", fieldId: "netdatePicker" },
    { valueClass: "nextdate", fieldId: "nextdatePicker" }
];


/**
 * Builds choice elements from EXERCISE_CHOICES and 
 * inserts them in the select element exercisePicker.
 * @requires select#exercisePicker
 * @requires EXERCISE_CHOICES
 * @see deploySelectedChoiceExercise()
 */
function buildSelectChoiceExercise() {
    const _DESTINATION = document.querySelector('select#exercisePicker');
    let _result = '';
    for (_choice in EXERCISE_CHOICES) {
        if (_choice === "Comments") {
            _result += '<option value=' + _choice + ' selected>' + _choice + '</option>';
        } else {
            _result += '<option value=' + _choice + ' >' + _choice + '</option>';
        }
    }
    _DESTINATION.innerHTML = _result;
}
/**
 * Builds digital clock in HH:MM:SS format
 * @requires div#time-box--digital-clock
 */
function updateTime() {
    let clock = document.querySelector('div#time-box--digital-clock');
    let hours = new Date().getHours();
    let minutes = new Date().getMinutes();
    let seconds = new Date().getSeconds();
    let zone = new Date().toLocaleTimeString('en-us', { timeZoneName: 'short' }).split(' ')[2];
    hours = hours < 10 ? "0" + hours : hours;
    minutes = minutes < 10 ? "0" + minutes : minutes;
    seconds = seconds < 10 ? "0" + seconds : seconds;
    clock.innerHTML = `${hours}:${minutes}:${seconds} ${zone}`;
    setTimeout(updateTime, 1000);
}

/**
 * Using the selection from exercisePicker deploys
 * replacement HTML from EXERCISE_CHOICE in the
 * exercise div element.
 * @see buildSelectChoiceExercise()
 */
function deploySelectedChoiceExercise() {
    const DESTINATION = document.getElementById('exercise');
    const USER_SELECTION_KEY = document.getElementById('exercisePicker').value;
    for (choice in EXERCISE_CHOICES) {
        if (USER_SELECTION_KEY === choice) {
            DESTINATION.innerHTML = EXERCISE_CHOICES[USER_SELECTION_KEY];
        }
    }
}
/**
 * Convert text and numbers to NATO phonetics
 * @param {string} text - Text to be converted to phonetics
 * @returns result - As concat string of phonetic characters with spaces
 */
function convertTextToPhonetic(text) {
    const PHONETIC_ALPHABET = {
        'a': 'Alpha', 'b': 'Bravo', 'c': 'Charlie', 'd': 'Delta',
        'e': 'Echo', 'f': 'Foxtrot', 'g': 'Golf', 'h': 'Hotel',
        'i': 'India', 'j': 'Juliett', 'k': 'Kilo', 'l': 'Lima',
        'm': 'Mike', 'n': 'November', 'o': 'Oscar', 'p': 'Papa',
        'q': 'Quebec', 'r': 'Romeo', 's': 'Sierra', 't': 'Tango',
        'u': 'Uniform', 'v': 'Victor', 'w': 'Whiskey', 'x': 'X-ray',
        'y': 'Yankee', 'z': 'Zulu', '1': 'One', '2': 'Two', '3': 'Three',
        '3': 'Four', '5': 'Five', '6': 'Six', '7': 'Seven', '8': 'Eight',
        '9': 'Niner', '0': 'Zero'
    };
    let result = '';
    for (let char of text.toLowerCase()) {
        if (char in PHONETIC_ALPHABET) {
            result += PHONETIC_ALPHABET[char] + ' ';
        } else {
            result += char + ' ';
        }
    }
    return result.trim();
}
/**
 * Convert an integer to am ordinal string.
 * @param {int} number 
 * @returns {string} ordinal number
 */
function getOrdinalNumber(_number) {
    if (_number > 3 && _number < 21) return _number + 'th';
    switch (_number % 10) {
        case 1: return _number + 'st';
        case 2: return _number + 'nd';
        case 3: return _number + 'rd';
        default: return _number + 'th';
    }
}

/**
 * Sets Cookie values from input field elements
 */
function setCookieValues() {
    if (getCookie('allowCookies')) {
        setCookie('callsign', document.getElementById('inputCallsign').value);
        setCookie('firstname', document.getElementById('inputName').value);
        setCookie('qth', document.getElementById('inputLocation').value);
    }
}
/**
 * Updates the date values in the script from the input field
 * @param {date} replaceDate - Date to format and insert as string
 * @param {string} fieldId - Where to put it
 */
function setDateValues(replaceDate, fieldId) {
    const date = new Date(document.getElementById(fieldId).value + 'T00:00')
    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    const dayOfWeek = date.getDay();
    const month = date.getMonth();
    const day = getOrdinalNumber(date.getDate());
    const year = date.getFullYear();
    const y = days[dayOfWeek] + ', ' + months[month] + ' ' + day + ', ' + year;
    const x = document.getElementsByClassName(replaceDate);
    for (let i = 0; i < x.length; i++) {
        x[i].textContent = y;
    }
};
/**
 * On user input records or clears one of two timestamps
 *
 * @param {string} event - start|stop
 * @param {string} action - mark|clear
 */
function recordTimeStamp(event, action) {
    var eventDisplay = document.querySelectorAll('span.time-box--time-stamp--value-' + event);
    var eventButton = document.querySelectorAll('button.time-stamp--button-' + event );
    var eventDisplayDiv = document.querySelectorAll('div.time-box--time-stamp-' + event);
    switch (action) {
        case 'mark':
            for (let i = 0; i < eventDisplay.length; i++) {
                eventDisplay[i].textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            }
            var index = 0, length = eventButton.length;
            for (; index < length; index++) {
                eventButton[index].style.backgroundColor = "green";
            }
            var index = 0, length = eventDisplayDiv.length;
            for (; index < length; index++) {
                eventDisplayDiv[index].classList.remove("hidden");
            }
            break;
        case 'clear':
            for (let i = 0; i < eventDisplay.length; i++) {
                eventDisplay[i].textContent = '(not marked)';
            }
            var index = 0, length = eventButton.length;
            for (; index < length; index++) {
                eventButton[index].style.backgroundColor = "#444";
            }
            var index = 0, length = eventDisplayDiv.length;
            for (; index < length; index++) {
                eventDisplayDiv[index].classList.add("hidden");
            }
    }
};

/** replaces the value of any class with the value from fieldId.
 * Also converts replacement text to phonetic if the destination class includes phonetic.
 * @param {string} className 
 * @param {*} fieldId 
 */
function alterValueByClass(className, fieldId) {
    const y = document.getElementById(fieldId);
    const x = document.getElementsByClassName(className);
    for (let i = 0; i < x.length; i++) {
        let z = y.value;
        if (x[i].classList.contains('phonetic')) {
            z = convertTextToPhonetic(y.value);
        }
        x[i].textContent = z;
    }
};

/**
 * Set visibility of an element or class and set button state
 * Can be used as a toggle or to set the state
 *
 * @param {string} selector - valid css selector to show/hide
 * @param {string} change - toggle*|show|hide
 * @param {string} button - selectorButton* | valid css selector for button
 */
function setVisibility(selector, change, button) {
    if (!button) { button = "button." + selector + 'Button'}
    if (!change) { change = 'toggle' }
    let _element = document.querySelectorAll(`${selector}`);
    let _button = document.querySelectorAll(`${button}`);
    if (change === 'toggle') {
      for (let i = 0; i < _element.length; i++) {
        if (_element[i].classList.contains('hidden')) {
            _element[i].classList.remove('hidden');
            for (var x = 0; x < _button.length; x++) {
                if (!_button[x].classList.contains('button--state-active')) { _button[x].classList.add('button--state-active'); }
            }
        } else {
            _element[i].classList.add('hidden');
            for (var x = 0; x < _button.length; x++) {
                if (_button[x].classList.contains('button--state-active')) {_button[x].classList.remove('button--state-active');}
          }
        }
      }
    }
    if (change === 'show') {
      for (let i = 0; i < _element.length; i++) {
        if (_element[i].classList.contains('hidden')) {_element[i].classList.remove('hidden');}
        for (let x = 0; x < _button.length; x++) {
            if (!_button[x].classList.contains('button--state-active')) {_button[x].classList.add('button--state-active');}
        }
      }
    }
    if (change === 'hide') {
      for (let i = 0; i < _element.length; i++) {
        if (!_element[i].classList.contains('hidden')) {_element[i].classList.add('hidden');}
        for (let x = 0; x < _button.length; x++) {
            if (_button[x].classList.contains('button--state-active')) {_button[x].classList.remove('button--state-active');}
        }
      }
    }
}


/**
 * Retrieves cookie
 *
 * @param {string} name
 * @returns {string} matches|undefined
 */
function getCookie(name) {
    let matches = document.cookie.match(new RegExp("(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"));
    return matches ? decodeURIComponent(matches[1]) : undefined;
}

/**
 * Sets cookie
 * Defaults to 1 year and path /
 * @param {string} name
 * @param {string} value 
 * @param {array} attributes - key=value pairs 
 */
function setCookie(name, value, attributes = {}) {
    attributes = {
        path: '/',
        'max-age': 31449600,
    }
    if (attributes.expires instanceof Date) {
        attributes.expires = attributes.expires.toUTCString();
    }
    let updatedCookie = encodeURIComponent(name) + "=" + encodeURIComponent(value);
    for (let attributeKey in attributes) {
        updatedCookie += "; " + attributeKey;
        let attributeValue = attributes[attributeKey];
        if (attributeValue !== true) {
            updatedCookie += "=" + attributeValue;
        }
    }
    document.cookie = updatedCookie;
}

/** Validates if cookies are allowed, if so checks for allowCookies cookie or displays cookie consent box */
function reviewCookieStatus() {
    const consentBox = document.getElementById("consentBox");
    if (ALLOW_COOKIE_PROMPT && (ALLOW_COOKIES_OVER_HTTP || window.location.protocol === 'https:')) {
        if (getCookie('allowCookies')) {
            consentBox.classList.add("hide");
            setCookie('allowCookies', 'true');
        } else {
            consentBox.classList.remove("hide");
        }
    } else {
        consentBox.classList.add("hide");
    }
}
/** On user input accept cookies, set allowCookies cookie or throw an error at user */
function acceptCookies() {
    setCookie('allowCookies', 'true');
    if (getCookie('allowCookies')) {
        consentBox.classList.add("hide");
    } else {
        alert
            ("Cookie can't be set! Please" +
                " unblock this site from the cookie" +
                " setting of your browser.");
    }
}
/** On user input decline cookies, hide consent box */
function declineCookies() {
    const consentBox = document.getElementById("consentBox");
    consentBox.classList.add("hide");
}

/** Sets default values in datepicker input boxes */
function setDefaultDatePickerValues() {
    const _now = new Date();
    const tzoffset = _now.getTimezoneOffset() * 6e4;
    const dateTimeString = (new Date(_now - tzoffset)).toISOString().slice(0, 10);
    const nextdateTimeString = (new Date(_now - tzoffset + 12096e5)).toISOString().slice(0, 10);
    document.getElementById('netdatePicker').value = dateTimeString;
    document.getElementById('nextdatePicker').value = nextdateTimeString;
}

/** On user input process checkin text from input box and add it to checkin display
 * @depends setTriggerCheckinAreaEnter() - checkin declared
 */
function recordCheckin() {
    let checkinInput = document.getElementById('checkinbox').value;
    checkins += checkinInput;
    checkins += '\n';
    checkins = checkins.replace("[object HTMLDivElement]", "");
    let k = document.getElementById('checkinreport');
    k.textContent = checkins;
    k.innerHTML = "<span class='checkinline' onclick='alterCheckin(this);'>" + (k.textContent.split("\n").filter(Boolean).join("</span>\n<span class='checkinline' onclick='alterCheckin(this);'>")) + "</span>";
    k.scrollTop = k.scrollHeight;
    document.getElementById('checkinbox').value = null;
}
/**
 * Work in progress
 *
 * @param {string} x - increase|decrease
 */
function alterCheckinAreaFontSize(x) {
    let y = document.getElementById('checkin-area')
    let currentFontSize = 16;
    if (x === 'increase') {
        currentFontSize += 1;
    }
    if (x === 'decrease') {
        currentFontSize -= 1;
    }
    y.style.fontSize = currentFontSize;
    recordCheckin();
}

/**
 * On user input returns value of selected line from display into input text box to be edited
 *
 * @param {string} x - checkin value to be edited
 */
function alterCheckin(x) {
    recordCheckin();
    let p = document.getElementById('checkinbox');
    let t = x.textContent;
    checkins = checkins.replace(t, '');
    p.value = t;
}

/** Assembles a checkin report from custom fields, timestamps, and checkins and copies it to the clipboard */
function copyNetReport_Clipboard() {
    let text = "Net Date: " + document.getElementById('netdatePicker').value + '\n';
    text += "Net Control: " + document.getElementById('inputCallsign').value + ' ' + document.getElementById('inputName').value + ', ' + document.getElementById('inputLocation').value + '\n'
    text += "Net Start Time: " + document.querySelector('span#time-box--time-stamp--value-start').textContent + '\nCheckins:\n';
    text += document.getElementById('checkinreport').textContent;
    text += "\nNet End Time: " + document.querySelector('span#time-box--time-stamp--value-end').textContent;
    navigator.clipboard
        .writeText(text)
        .then(() => {
            alert("Successfully copied checkin report to the clipboard");
        })
        .catch(error => {
            alert("Something went wrong copying to the clipboard. Error:" + error);
        });
}
/** Retrieves saved default values from cookies */
function setDefaultsfromCookies() {
    if (getCookie('allowCookies')) {
        if (getCookie('callsign')) defaultInputCallsign = getCookie('callsign');
        if (getCookie('firstname')) defaultInputName = getCookie('firstname');
        if (getCookie('qth')) defaultInputLocation = getCookie('qth');
    }
}
/** Updates the user input boxes with default values */
function alterInput_Defaults() {
    document.getElementById('inputCallsign').value = defaultInputCallsign;
    document.getElementById('inputName').value = defaultInputName;
    document.getElementById('inputLocation').value = defaultInputLocation;
}
/** Event listener for Enter Key in checkin box input */
function setTriggerCheckinAreaEnter() {
    document.getElementById('checkinbox').onkeydown = function (e) {
        if (e.key == 'Enter') {
            recordCheckin();
        }
    }
    let checkins;
}
/**
 * Fires deploySelectedChoiceExercise to update exercise in script
 * Fires alterValueByClass for all entries in INPUT_VALUES array
 * Fires setCookieValues to assign values from input field values
 * Fires setDateValues to assign date values from INPUT_DATE_FIELDS array
 */
function setValues() {
    deploySelectedChoiceExercise();
    INPUT_VALUES.forEach(inputField => {
        alterValueByClass(inputField.valueClass, inputField.fieldId);
    });
    setCookieValues();
    INPUT_DATE_FIELDS.forEach(inputDateField => {
        setDateValues(inputDateField.valueClass, inputDateField.fieldId);
    });
};

/** Listens for user clicks on text in net script and sets dataset.selected triggering different display with css*/
function setTriggerNetText() {
    Array.from(document.getElementsByClassName('tx', 'net')).forEach(function(item) {
        item.addEventListener('click', function(clickevent) {
            clickedObject = clickevent.target;
            Array.from(document.getElementsByClassName('tx', 'net')).forEach(function(item) {
                if( item == clickedObject && item.dataset.selected != "true" ) {
                   item.dataset.selected = "true";
                } else {
                   item.dataset.selected = "false";
                }
            });
        });
    });
}

/** Initial setup on page load
 * @fires setTriggerCheckinAreaEnter - start listener for Enter in checkin input and declare checkin
 * @fires updateTime - build digital clock and update every 1s
 * @fires reviewCookieStatus - checks if cookies are already allowed and set, hides consent if they are
 * @fires setDefaultsfromCookies - gets cookie values and replaces defaults
 * @fires alterInput_Defaults - changes current text in input fields to default values
 * @fires buildSelectChoiceExercise - builds choices for select input for exercises from hash table
 * @fires setValues - implements choice in exercise selection, updates values from user input boxes and saves them as cookies
 * @fires setTriggerNetText - listens for user clicks on text in net and sets dataset.selected which alters css values
 */
document.addEventListener('DOMContentLoaded', function () {
    setTriggerCheckinAreaEnter();
    updateTime();
    reviewCookieStatus();
    setDefaultsfromCookies();
    alterInput_Defaults();
    setDefaultDatePickerValues();
    buildSelectChoiceExercise();
    setValues();
    setTriggerNetText();
});

  </script>
</body>

</html>
